<!-- BEGIN PAGE HEADER-->
<h3 class="page-title">
	
</h3>
<div class="page-bar">
	<ul class="page-breadcrumb">
		<li>
			<i class="fa fa-home"></i>
      <i class="fa fa-angle-right"></i>
      <a href="#/ng_patient.html">Patient</a>
      
    </li>
    
  </ul>
  
</div>
<!-- END PAGE HEADER-->

<!-- BEGIN SPINNER -->
<div ng-spinner-bar class="page-spinner-bar">
  <div class="bounce1"></div>
  <div class="bounce2"></div>
  <div class="bounce3"></div>
</div>


<div class="row">
  <div class="col-md-12">
    <div class="portlet light bordered">
     
      <div class="portlet-body">
        <div class="row">
          <div class="col-md-6">
           <button type="button" class="btn btn-info btnradius " data-toggle="modal" data-target="#myModal">Add Patient</button>
         </div>
         <div class="col-md-6">
          <button ng-click="refreshNgTable()" class="btn btnradius">{{(showFilter)?"Remove Filter":"Show Filter"}}</button>
        </div>

      </div>
      <br>

      <div class="row">

        <table ng-table="tableParams" class="table table-bordered" show-filter="showFilter">
          <tr ng-repeat="pat in patientList">
            <td data-title="'Name'" filter="{ 'name': 'text'}" sortable="'name'">
              <span editable-text="pat.name" e-name="name" e-form="rowform">
                {{pat.name}}
              </td>
              <td data-title="'Address'" >
                <span editable-text="pat.address" e-name="address" e-form="rowform">
                  {{pat.address}}
                </td>
                <td data-title="'Email'" filter="{ 'email': 'text'}" sortable="'speciality'">
                  <span editable-text="pat.email" e-name="email" e-form="rowform">
                    {{pat.email}}
                  </td>
                  
                  <td data-title="'Mobile'">
                    <span editable-text="pat.phoneno" e-name="phoneno" e-form="rowform">
                      {{pat.phoneno}}
                    </td>

                    <td data-title="'Birth Date'">
                      <span editable-text="pat.dateofbirth" e-name="dateofbirth" e-form="rowform">
                        {{pat.dateofbirth}}
                      </td>

                      <td data-title="'User Name'">
                        <span editable-text="pat.username" e-name="username" e-form="rowform">
                          {{pat.username}}
                        </td>

                       <!--  <td data-title="'Password'">
                          <span editable-text="pat.password" e-name="password" e-form="rowform">
                            {{pat.password}}
                          </td> -->

                          <td data-title="'Gender'">
                            <span editable-text="pat.gender" e-name="gender" e-form="rowform">
                              {{pat.gender}}
                            </td>

                            <td data-title="'Blood Group'">
                              <span editable-text="pat.bloodgroup" e-name="bloodgroup" e-form="rowform">
                                {{pat.bloodgroup}}
                              </td>
                              <td data-title="'Status'" >
                               <button type="button" class="btn btn-link" ng-click="updateStatusPatient(pat,pat._id)">{{pat.status}}</button>
                             </td>

                             <td style="white-space: nowrap">
                              <!-- form -->
                              <form editable-form name="rowform" onbeforesave="updatePatient($data,pat._id)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == user">
                                <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary btnradius">
                                  <span class="glyphicon glyphicon-ok-circle"></span>
                                </button>
                                <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default btnradius">
                                  <span class="glyphicon glyphicon-remove-circle"></span>
                                </button>
                              </form>
                              <div class="buttons" ng-show="!rowform.$visible">
                                <button class="btn btn-primary" ng-click="rowform.$show()"><span class="glyphicon glyphicon-edit btnradius"></span></button>
                                <button class="btn btn-danger" ng-click="deletePatient(pat._id)">del</button>
                              </div>
                            </td>
                          </tr>
                        </table>


                      </div>
                    </div>
                  </div>
                </div>
              </div>
              


              <!-- Modal -->
              <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">
                  
                  <!-- Modal content-->
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                      <h4 class="modal-title">Modal Header</h4>
                    </div>
                    <div class="modal-body">
                      <form name=PatientFrm>
                        <table class="table">
                          <tbody>
                            <tr>
                              <td>
                                <div class="form-group">
                                  <div class="col-sm-4">Patient Name</div>
                                  <div class="col-sm-8">
                                    <input type="text" class="form-control" id="name" name="name" ng-model="patient.name" only-letters-input required />

                                    <span ng-show="PatientFrm.name.$error.required && PatientFrm.name.$touched" style="color: red;">This field is required</span>

                                    <span ng-show="PatientFrm.name.$error.onlyLettersInput">Enter only charactors</span>

                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  <div class="form-group">
                                    <div class="col-sm-4">Address</div>
                                    <div class="col-sm-8">
                                      <input type="text" class="form-control" id="address" name="address" ng-model="patient.address" required />

                                      <span ng-show="PatientFrm.address.$error.required && PatientFrm.address.$touched" style="color: red;">This field is required</span>

                                    </div>
                                  </td>
                                </tr>
                                <tr>
                                  <td>
                                    <div class="form-group">
                                      <div class="col-sm-4">Email</div>
                                      <div class="col-sm-8">
                                        <input type="email" class="form-control" id="email" name="email" ng-model="patient.email" required />

                                        <span ng-show="PatientFrm.email.$error.required && PatientFrm.email.$touched" style="color: red;">This field is required</span>

                                        <span ng-show="PatientFrm.email.$error.email" style="color: red">Please enter valid email</span> 
                                      </div>
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>
                                      <div class="form-group">
                                        <div class="col-sm-4">Mobile No</div>
                                        <div class="col-sm-8">
                                          <input type="text" class="form-control" id="phoneno" name="phoneno" ng-model="patient.phoneno" ng-pattern= "/^[7-9][0-9]{9}$/"  required/>

                                          <span ng-show="PatientFrm.phoneno.$error.required && PatientFrm.phoneno.$touched" style="color: red;">This field is required</span>

                                    <span ng-show="PatientFrm.phoneno.$error.pattern" style="color: red;">Invalid Mobile No</span>
                                        </div>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        <div class="form-group">
                                          <div class="col-sm-4">Birth Date</div>
                                          <div class="col-sm-8">
                                            <div class="input-group input-medium date date-picker">
                                             <input type="text" class="form-control" ng-model="patient.dateofbirth" uib-datepicker-popup="{{format}}" style="width:298px;" id="date" is-open="popup_date.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" alt-input-formats="altInputFormats" readonly/>
                                             <span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="date()"><i class="glyphicon glyphicon-calendar"></i></button></span>
                                           </div>
                                         </div>
                                       </td>
                                     </tr>

                                     <tr>
                                      <td>
                                        <div class="form-group">
                                          <div class="col-sm-4">User Name</div>
                                          <div class="col-sm-8">
                                            <input type="text" class="form-control" id="username" name="username" ng-model="patient.username" required />

                                            <span ng-show="PatientFrm.username.$error.required && PatientFrm.username.$touched" style="color: red;">This field is required</span>

                                          </div>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          <div class="form-group">
                                            <div class="col-sm-4">Password</div>
                                            <div class="col-sm-8">
                                              <input type="password" class="form-control" id="password" name="password" ng-model="patient.password" ng-minlength="4" ng-maxlength="10" required />

                                              <span ng-show="PatientFrm.password.$error.required && PatientFrm.password.$touched" style="color: red;">This field is required</span>
                                               <span ng-show="PatientFrm.password.$error.minlength" style="color:red;">Too Short</span>
                                              <span ng-show="PatientFrm.password.$error.maxlength" style="color:red;">Too Long</span>


                                            </div>
                                          </td>
                                        </tr>

                                        <tr>
                                          <td>
                                            <div class="form-group">
                                              <div class="col-sm-4">Gender</div>
                                              <div class="col-sm-8">
                                                <select class="form-control" id="gender" name="gender" ng-model="patient.gender" required >
                                                  <option value="">Select</option>
                                                  <option value="male">Male</option>
                                                  <option value="female">Female</option>
                                                  <option value="other">Other</option>
                                                </select>
                                              </div>
                                            </td>
                                          </tr>

                                          <tr>
                                            <td>
                                              <div class="form-group">
                                                <div class="col-sm-4">Blood Group</div>
                                                <div class="col-sm-8">
                                                  <input type="text" class="form-control" id="bloodgroup" name="bloodgroup" ng-model="patient.bloodgroup" required />
                                                  <span ng-show="PatientFrm.bloodgroup.$error.required && PatientFrm.bloodgroup.$touched" style="color: red;">This field is required</span>
                                                </div>
                                              </td>
                                            </tr>
                                            <tr>
                                              <td>
                                                <div class="form-group">
                                                  <div class="col-sm-4">Status</div>
                                                  <div class="col-sm-8">
                                                    <select class="form-control" ng-model="patient.status" name="status" id="status" required>
                                                      <option value=""> Select</option>
                                                      <option value="active" selected >Active</option>
                                                      <option value="deactive">DeActive</option>
                                                    </select>
                                                    
                                                  </div>
                                                </td>
                                              </tr>

                                            </table>
                                          </form>
                                        </div>
                                        <div class="modal-footer">
                                         <button type="button" class="btn btn-primary" ng-click="savePatient()" data-dismiss="modal" ng-disabled="PatientFrm.$invalid">Save</button>
                                         <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                       </div>
                                     </div>
                                     
                                   </div>
                                 </div>
                                 


